## HTTP

### HTTPS协议

结合了SSL/TLS协议，对通信数据进行加密，解决了HTTP数据透明的问题。

SSL：安全套接字协议。

SSL/TLS的工作原理：在构建TCP连接的时候先非对称加密，接着在后续的过程中进行对称加密。

1. 先非对称加密，然后双方交换对称加密的密钥，之后在用对称加密来进行加密传输

为保证非对称性加密的公钥是确定的。又需要第三方机构CA给一个数字签名。

### HTTPS和http的连接区别

https是在http的基础上增加了SSL/TLS协议，用于加密客户端和服务端之间的通信。通信过程如下：



### 带有证书的公钥传输机制：

设有服务器 S，客户端 C，和第三方信赖机构 CA。

S 信任 CA，CA 是知道 S 公钥的，CA 向 S 颁发证书。并附上 CA 私钥对消息摘要的加密签名。

S 获得 CA 颁发的证书，将该证书传递给 C。

C 获得 S 的证书，信任 CA 并知晓 CA 公钥，使用 CA 公钥对 S 证书上的签名解密，同时对消息进行散列处理，得到摘要。比较摘要，验证 S 证书的真实性。

如果 C 验证 S 证书是真实的，则信任 S 的公钥（在 S 证书中）。

### HTTP1.0和HTTP1.1的区别

1. 缓存方式变化

   在 HTTP/1.0 中主要使用 Header 里的 If-Modified-Since,Expires 来做为缓存判断的标准，HTTP/1.1 则引入了更多的缓存控制策略例如 Entity tag，If-Unmodified-Since, If-Match, If-None-Match 等更多可供选择的缓存头来控制缓存策略。

2. 1.0默认是短连接，1.1默认是长连接

3. Host头处理，1.1中加入了Host字段，表明想要请求的主机名

4. 带宽： Http1.0存在浪费带宽的现象，客户端申请部分资源，服务端将整个对象都返回出来。服务器将Http1.1则在请求头引入了range头域，它只允许请求资源的部分.

### HTTP2.0和HTTP1.1的区别

1. 多路复用：HTTP2.0在同一连接上可以同时传输多个请求和响应，互不干扰。
2. 二进制帧：HTTP2.0使用二进制帧进行数据传输，而http则使用文本格式的报文。二进制帧更加紧凑和高效，减少了传输的数据量和带宽消耗。
3. 头部压缩：HTTP1.1支持body压缩，header不支持压缩。Http2.0支持头部header压缩。减少了网络开销。
4. 服务器推送：HTTP2.0支持服务器推送，可以在客户端请求一个资源时，将其他相关资源一并推送给客户端，从而减少客户端的请求次数和延迟。而http1.1需要客户端自己发送请求来获取相关资源。

HTTP3.0

改用了基于UDP的QUIC协议

此变化解决了HTTP/2存在的队头堵塞问题。

队头堵塞是指在HTTP2.0中，多个HTTP请求和响应共享一个TCP连接，如果其中一个请求或响应因为网络堵塞或丢包而被堵塞，那么后续的请求或响应也无法发送，导致整个连接的效率降低。这是由于HTTP/2.0在单个TCP连接上使用了多路复用，受到TCP拥塞控制的影响，少量的丢包就可能导致整个TCP连接上的所有流被堵塞。HTTP3.0在一定程度上解决了这个问题，一个连接建立多个不同的数据流，这些数据流之间独立互不影响，整个数据流发生丢包了，其数据流不受影响。本质上为多路复用+轮询。



## RPC和websocket

RPC主要用在C/S客户端和服务端相互访问的情况。



websocket实现**在服务器主动发消息给客户端的场景** 例如**网页游戏**这样，客户端和服务端之间都要互相主动发大量数据的场景。

长轮询：将HTTP请求的超时设置的很大，比如30秒。在30秒内只要服务器收到了扫码请求，就立马返回给客户端网页。

### 怎么建立websocket连接

建立完TCP三次握手之后，统一先使用HTTP请求先进行一次请求：

1. 如果是普通的http请求的话，则保持http连接进行访问
2. 如果要更新为websocket的话，则需要发送请求将http改为websocket协议，在http请求头上带上一些特殊的header头

## 传输层

1. TCP序列号是一个32位的字段，所以最大序列号位2^32-1.
2. TCP的可靠传输
1.序列号，确认应答、超时重传、流量控制、拥塞控制等

3. 